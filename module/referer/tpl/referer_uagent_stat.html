<include target="header.html" />
<load target="js/Chart.min.js" />
<load target="js/Chart.helper.js" />

{@$totalOS=count($OSes)}
{@$totalWin=count($Windows)}
{@$totalMac=count($Macs)}
{@$totaliOS=count($iOSes)}
{@$totalAnd=count($Androids)}
{@$totalBro=count($Browsers)}
{@$totalIE=count($IEs)}

<!--@if($Types['bot'] > 0)-->
<section class="chart-container table">
	<h3>{$lang->conn_bot}</h3>
	<div class="labeled-chart-container half">
		<div class="canvas-holder">
			<canvas id="userbot-chart" width="250" height="125" />
		</div>
		<div class="chart-title">{$lang->ua_normal} : {$lang->ua_bot}</div>
	</div>
	<div class="labeled-chart-container half">
		<div class="canvas-holder">
			<canvas id="bot-chart" width="250" height="125" />
		</div>
		<div class="chart-title">{$lang->ua_bot_provider}</div>
	</div>
</section>
<!--@end-->
<section class="chart-container table">
	<h3>{$lang->conn_pl}</h3>
	<div class="labeled-chart-container half">
		<div class="canvas-holder">
			<canvas id="platform-chart" width="250" height="125" />
		</div>
		<div class="chart-title">{$lang->ua_desktop} : {$lang->ua_mobile}</div>
	</div>
</section>
<section class="chart-container table" cond="$totalOS>0">
	<h3>{$lang->conn_os}</h3>
	<div class="labeled-chart-container half">
		<div class="canvas-holder">
			<canvas id="os-chart" width="250" height="125" />
		</div>
		<div class="chart-title">{$lang->ua_os}</div>
	</div>
	<div class="labeled-chart-container half" cond="$totalWin>0">
		<div class="canvas-holder">
			<canvas id="windows-chart" width="250" height="125" />
		</div>
		<div class="chart-title">MS Windows Versions</div>
	</div>
	<div class="labeled-chart-container half" cond="$totalMac>0">
		<div class="canvas-holder">
			<canvas id="mac-chart" width="250" height="125" />
		</div>
		<div class="chart-title">Mac OS X Versions</div>
	</div>
	<div class="labeled-chart-container half" cond="$totaliOS>0">
		<div class="canvas-holder">
			<canvas id="ios-chart" width="250" height="125" />
		</div>
		<div class="chart-title">iOS Versions</div>
	</div>
	<div class="labeled-chart-container half" cond="$totalAnd>0">
		<div class="canvas-holder">
			<canvas id="android-chart" width="250" height="125" />
		</div>
		<div class="chart-title">Android Versions</div>
	</div>
</section>
<div class="chart-container table" cond="$totalBro>0">
	<h3>{$lang->conn_br}</h3>
	<div class="labeled-chart-container half">
		<div class="canvas-holder">
			<canvas id="browser-chart" width="250" height="125" />
		</div>
		<div class="chart-title">Browsers</div>
	</div>
	<div class="labeled-chart-container half" cond="$totalIE>0">
		<div class="canvas-holder">
			<canvas id="ie-chart" width="250" height="125" />
		</div>
		<div class="chart-title">Internet Explorer Versions</div>
	</div>
</div>

<script>
<!--@if($Types['bot'] > 0)-->
	var userData = [
		{ value: {$Types['notbot']}, color: Blue,	highlight: Highlight(Blue), label: "{$lang->ua_normal}" },
		{ value: {$Types['bot']},  color: Red, highlight: Highlight(Red), label: "{$lang->ua_bot}" }
	];

{@$no=0}
{@$total=count($Bots)}
	var botData = [
<!--@foreach($Bots as $key=>$val)-->
		{ value: {$val}, color: colors[{$no}],	highlight: Highlight(colors[{$no}]), label: "{$key}" }
{@$no++}
<!--@if($no < $total)-->
,
<!--@end-->
<!--@end-->
	];
<!--@end-->

	var platformData = [
		{ value: {$Types['desktop']}, color: Green,	highlight: Highlight(Green), label: "{$lang->ua_desktop}" },
		{ value: {$Types['mobile']},  color: Orange, highlight: Highlight(Orange), label: "{$lang->ua_mobile}" }
	];

{@$no=0}
	var osData = [
<!--@foreach($OSes as $key=>$val)-->
		{ value: {$val}, color: colors[{$no}],	highlight: Highlight(colors[{$no}]), label: "{$key}" }
{@$no++}
<!--@if($no < $totalOS)-->
,
<!--@end-->
<!--@end-->
	];

{@$no=0}
	var winData = [
<!--@foreach($Windows as $key=>$val)-->
		{ value: {$val}, color: colors[{$no}],	highlight: Highlight(colors[{$no}]), label: "{$key}" }
{@$no++}
<!--@if($no < $totalWin)-->
,
<!--@end-->
<!--@end-->
	];

{@$no=0}
	var macData = [
<!--@foreach($Macs as $key=>$val)-->
		{ value: {$val}, color: colors[{$no}],	highlight: Highlight(colors[{$no}]), label: "{$key}" }
{@$no++}
<!--@if($no < $totalMac)-->
,
<!--@end-->
<!--@end-->
	];

{@$no=0}
	var iosData = [
<!--@foreach($iOSes as $key=>$val)-->
		{ value: {$val}, color: colors[{$no}],	highlight: Highlight(colors[{$no}]), label: "{$key}" }
{@$no++}
<!--@if($no < $totaliOS)-->
,
<!--@end-->
<!--@end-->
	];

{@$no=0}
	var andData = [
<!--@foreach($Androids as $key=>$val)-->
		{ value: {$val}, color: colors[{$no}],	highlight: Highlight(colors[{$no}]), label: "{$key}" }
{@$no++}
<!--@if($no < $totalAnd)-->
,
<!--@end-->
<!--@end-->
	];

{@$no=0}
	var broData = [
<!--@foreach($Browsers as $key=>$val)-->
		{ value: {$val}, color: colors[{$no}],	highlight: Highlight(colors[{$no}]), label: "{$key}" }
{@$no++}
<!--@if($no < $totalBro)-->
,
<!--@end-->
<!--@end-->
	];

{@$no=0}
	var ieData = [
<!--@foreach($IEs as $key=>$val)-->
		{ value: {$val}, color: colors[{$no}],	highlight: Highlight(colors[{$no}]), label: "{$key}" }
{@$no++}
<!--@if($no < $totalIE)-->
,
<!--@end-->
<!--@end-->
	];

	window.onload = function(){
<!--@if($Types['bot'] > 0)-->
		showChart(window.userChart, "userbot-chart", userData);
		showChart(window.botChart, "bot-chart", botData);
<!--@end-->
		showChart(window.platformChart, "platform-chart", platformData);
		showChart(window.osChart, "os-chart", osData);
		showChart(window.winChart, "windows-chart", winData);
		showChart(window.macChart, "mac-chart", macData);
		showChart(window.iosChart, "ios-chart", iosData);
		showChart(window.andChart, "android-chart", andData);
		showChart(window.broChart, "browser-chart", broData);
		showChart(window.ieChart, "ie-chart", ieData);
	};
</script>
